<Window x:Class="KingdomHeartsMusicPatcher.InstructionsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Instructions" Height="500" Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#FF252526" Foreground="White"
        FontFamily="Segoe UI">
    <FlowDocumentScrollViewer VerticalScrollBarVisibility="Auto" Padding="20" IsToolBarVisible="False" IsSelectionEnabled="True"
                              FontFamily="Segoe UI"
                              TextOptions.TextFormattingMode="Display"
                              TextOptions.TextRenderingMode="ClearType">
        <FlowDocument Background="Transparent" Foreground="White" FontFamily="Segoe UI" FontSize="13" FontWeight="Normal">
            <Paragraph FontSize="20" FontWeight="Bold" Foreground="#FF007ACC">Instructions - Kingdom Hearts Music Patcher</Paragraph>

            <Paragraph FontStyle="Italic" FontSize="12" Foreground="#FFAAAAAA">
                <Run>Version:</Run>
                <Run x:Name="VersionRun" />
                <Run>(tested on Epic Games as of September 10, 2025)</Run>
            </Paragraph>

            <!-- Purpose paragraph added -->
            <Paragraph FontSize="13" FontWeight="Normal" Margin="0,0,0,8">
                This application helps you create custom music patches for the Kingdom Hearts HD collections by assigning local audio files or YouTube links to in-game tracks, encoding them and packaging them into a patch that can be applied to your installation.
            </Paragraph>

            <Paragraph TextAlignment="Justify" Margin="0,0,0,12">
                ‚ö†Ô∏è Important notice: changes applied to the game's music cannot be undone unless you have a backup of the files in the "KH_1.5_2.5\\Image\\en" folder, or you reinstall the game or verify the game files. At least when using Epic Games, reinstalling or verifying the files does not remove saved game data. If, after installing a patch, the game keeps crashing when you try to start it, you will probably need to perform one of these actions. Unless you apply a previous working patch and you get lucky and the game files are fixed. 
            </Paragraph>

            <Paragraph FontWeight="SemiBold" FontSize="18">Steps to generate and apply a patch:</Paragraph>
            <Paragraph TextAlignment="Justify">1. Select the tab for the game you want to generate a patch for.</Paragraph>
            <Paragraph TextAlignment="Justify">2. Add references to local audio files or YouTube links you want to use to replace the music for the tracks you choose.</Paragraph>
            <Paragraph TextAlignment="Justify">3. Click the 'Generate Music Patch' button and wait for the patch to be created.</Paragraph>
            <Paragraph TextAlignment="Justify">4. Click the 'Apply Patch' button. This will launch another application (KHPCPatchManager), which performs the actual replacement of the tracks.</Paragraph>
            <Paragraph TextAlignment="Justify">5. In KHPCPatchManager, locate the patch you want to apply (it can be the one you just generated or another one).</Paragraph>
            <Paragraph TextAlignment="Justify">6. In KHPCPatchManager, click the apply patch button. You may be asked to locate your game installation folder (KH_1.5_2.5). Wait until the process completes.</Paragraph>
            <Paragraph TextAlignment="Justify" Margin="0,0,0,10">7. Done! üéâ When you start the game, the music will have been replaced with the tracks you selected.</Paragraph>

            <Paragraph FontWeight="SemiBold" FontSize="18">Additional notes</Paragraph>

            <Paragraph TextAlignment="Justify">‚Ä¢ Patches cannot be applied correctly if the game is being executed. If you have only the KINGDOM HEARTS HD 1.5+2.5 ReMIX launcher open, that is usually fine.</Paragraph>
            <Paragraph TextAlignment="Justify">‚Ä¢ Patches are generated per game. A single patch cannot modify songs for both KH1 and KH2 simultaneously, for instance.</Paragraph>
            <Paragraph TextAlignment="Justify">‚Ä¢ You can create a patch that changes a single song, several songs, or every song in the game. If you want to do this last thing, the 'Select All Tracks' option combined with 'Assign Song to Selected Tracks' can be useful.</Paragraph>
            <Paragraph TextAlignment="Justify">‚Ä¢ You can apply as many patches as you want, one after another. Be aware that after many changes it can be hard to remember which song plays where üòÇ. In those cases you can reinstall the game, apply a patch that contains the original music to restore the initial state, or restore from a backup of KH_1.5_2.5\\Image\\en.</Paragraph>
            <!-- Save Config note added -->
            <Paragraph TextAlignment="Justify">‚Ä¢ 'Save Config' button can be used to export your current track assignments to a JSON file. You can later restore these assignments with 'Load Config' to reuse or share your configuration.
            </Paragraph>
            <Paragraph TextAlignment="Justify">‚Ä¢ Local audio files supported: .mp3, .mp4 and .wav.</Paragraph>

            <!-- Report Bugs section -->
            <Paragraph FontWeight="SemiBold" FontSize="18" Margin="0,20,0,0">Report Bugs</Paragraph>
            <Paragraph TextAlignment="Justify">If you experience a problem, crash or incorrect behavior while using the application, it can be reported here: 
                <Hyperlink NavigateUri="https://github.com/jmtdev0/KingdomHeartsCustomMusic/issues/1" RequestNavigate="Hyperlink_RequestNavigate">GitHub Bug Report Thread</Hyperlink>.
            </Paragraph>
        </FlowDocument>
    </FlowDocumentScrollViewer>
</Window>